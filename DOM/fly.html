<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Colorful Dove — Sparkle Trail</title>
<style>
  :root{
    --bg1: #7c3aed;
    --bg2: #ff6fd8;
    --bg3: #3ae8b0;
    --accent: #ffd166;
  }

  html,body{
    height:100%;
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: #140026;
    overflow:hidden;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* animated multi-layer gradient background */
  .bg {
    position:fixed;
    inset:0;
    z-index:0;
    background:
      radial-gradient(closest-side at 20% 30%, rgba(255,255,255,0.06), transparent 18%),
      radial-gradient(closest-side at 80% 70%, rgba(255,255,255,0.03), transparent 20%),
      linear-gradient(120deg, var(--bg1), var(--bg2) 40%, var(--bg3) 80%);
    filter: saturate(120%) blur(6px);
    transform: scale(1.05);
    animation: bgShift 12s ease-in-out infinite alternate;
  }

  @keyframes bgShift {
    0% { filter: saturate(110%) blur(5px) contrast(1); transform: scale(1.03) rotate(-1deg); }
    50%{ filter: saturate(140%) blur(3px) contrast(1.04); transform: scale(1.06) rotate(0.6deg); }
    100%{ filter: saturate(120%) blur(6px) contrast(1); transform: scale(1.03) rotate(-1deg); }
  }

  /* soft vignette and color overlay for glow */
  .overlay {
    position:fixed;
    inset:0;
    z-index:1;
    pointer-events:none;
    background:
      radial-gradient(60% 40% at 50% 45%, rgba(255,255,255,0.06), transparent 15%),
      linear-gradient(180deg, rgba(255,255,255,0.02), transparent 15%);
    mix-blend-mode: screen;
  }

  /* main stage */
  .stage {
    position:relative;
    z-index:2;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* canvas for sparkles (covers viewport) */
  canvas.particles {
    position:fixed;
    inset:0;
    z-index:3;
    pointer-events:none;
  }

  /* dove video styling */
  .dove-wrap {
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:420px;
    max-width:55vw;
    z-index:5;
    will-change: transform, filter;
  }

  .dove {
    width:100%;
    display:block;
    border-radius:16px;
    filter: drop-shadow(0 24px 40px rgba(60,10,80,0.6)) brightness(1.03) contrast(1.02) saturate(1.08);
    transform-origin: 50% 60%;
    /* change blending to make it blend nicer with background */
    mix-blend-mode: screen;
    /* animate subtle pitch/tilt & floating */
    animation: floatTilt 4.8s ease-in-out infinite;
  }

  @keyframes floatTilt {
    0%   { transform: translateY(0) rotate(-1.2deg) scale(1); }
    25%  { transform: translateY(-10px) rotate(2.6deg) scale(1.02); }
    50%  { transform: translateY(-14px) rotate(-1deg) scale(1.01); }
    75%  { transform: translateY(-8px) rotate(1.8deg) scale(1.02); }
    100% { transform: translateY(0) rotate(-1.2deg) scale(1); }
  }

  /* horizontal travel animation: move left-right across middle, alternate so it continuously goes back and forth */
  .fly-across {
    position:absolute;
    left: -30%;               /* start off-screen left */
    top: 50%;
    transform: translateY(-50%) translateX(0);
    width:420px;
    max-width:55vw;
    animation: across 12s linear infinite alternate;
    z-index:5;
  }

  @keyframes across {
    0%   { left: -35%; }
    20%  { left: 10%; }      /* enters screen */
    40%  { left: 35%; }      /* crosses center */
    60%  { left: 60%; }
    80%  { left: 85%; }      /* near right edge */
    100% { left: 115%; }     /* exits right */
  }

  /* decorative lens flare / color streak under dove */
  .streak {
    position:absolute;
    z-index:4;
    pointer-events:none;
    left:50%;
    top:56%;
    transform:translate(-50%,-50%);
    width:420px;
    height:80px;
    background: radial-gradient(50% 100% at 50% 30%, rgba(255,255,255,0.18), rgba(255,255,255,0.02) 35%, transparent 60%);
    filter: blur(20px) saturate(140%);
    mix-blend-mode: screen;
    opacity:0.85;
    border-radius: 50%;
    animation: streakPulse 4s ease-in-out infinite;
    display:block;
  }

  @keyframes streakPulse {
    0% { transform: translate(-50%,-50%) scaleX(1) scaleY(1); opacity:0.6; }
    50%{ transform: translate(-50%,-50%) scaleX(1.06) scaleY(1.07); opacity:0.9; }
    100%{ transform: translate(-50%,-50%) scaleX(1) scaleY(1); opacity:0.6; }
  }

  /* small UI hint (hidden on mobile) */
  .hint {
    position:fixed;
    z-index:9;
    bottom:18px;
    left:18px;
    color:rgba(255,255,255,0.9);
    font-size:13px;
    background: rgba(0,0,0,0.18);
    padding:8px 10px;
    border-radius:10px;
    backdrop-filter: blur(6px);
  }

  /* responsive tweaks */
  @media (max-width:640px){
    .dove-wrap, .fly-across { width: 58vw; max-width:none; }
    .streak { width:60vw; height:60px; top:62%; }
    .hint{ display:none; }
  }
</style>
</head>
<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="overlay" aria-hidden="true"></div>

  <div class="stage" id="stage">
    <!-- canvas for sparkles -->
    <canvas class="particles" id="particles"></canvas>

    <!-- color streak under dove (follows with JS) -->
    <div class="streak" id="streak"></div>

    <!-- dove wrapper that flies left->right and back -->
    <div class="fly-across" id="flyWrap" aria-hidden="true">
      <div class="dove-wrap">
        <!-- Use your dove.mp4 file (place in same folder) -->
        <video id="doveVideo" class="dove" src="dove.mp4" autoplay loop muted playsinline preload="auto"></video>
      </div>
    </div>

    <div class="hint">Colorful sparkles follow the dove — hover or tap to briefly pause.</div>
  </div>

<script>
/* ============================
   Particle sparkle system
   - draws colorful sparkling particles that trail near the dove's position
   - additive blending for glow
   ============================ */

const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d', { alpha: true });

let DPR = Math.max(1, window.devicePixelRatio || 1);

function resizeCanvas() {
  DPR = Math.max(1, window.devicePixelRatio || 1);
  canvas.width = Math.floor(window.innerWidth * DPR);
  canvas.height = Math.floor(window.innerHeight * DPR);
  canvas.style.width = window.innerWidth + 'px';
  canvas.style.height = window.innerHeight + 'px';
  ctx.setTransform(DPR,0,0,DPR,0,0);
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

/* Particle class */
class Particle {
  constructor(x,y,color){
    this.x = x + (Math.random()-0.5) * 18;
    this.y = y + (Math.random()-0.5) * 12;
    const speed = 0.3 + Math.random()*1.6;
    const angle = (-Math.PI/2) + (Math.random()-0.5) * 0.8; // upward bias
    this.vx = Math.cos(angle) * speed;
    this.vy = Math.sin(angle) * speed - 0.4;
    this.size = 1 + Math.random()*5;
    this.life = 0;
    this.ttl = 60 + Math.floor(Math.random()*90);
    this.color = color;
    this.alpha = 1;
  }
  update(){
    this.x += this.vx * (0.6 + Math.random()*0.6);
    this.y += this.vy * (0.6 + Math.random()*0.6);
    this.vx *= 0.995;
    this.vy += 0.02; // gravity subtle
    this.life++;
    this.alpha = Math.max(0, 1 - (this.life / this.ttl));
    return this.life < this.ttl;
  }
  draw(ctx){
    ctx.save();
    ctx.globalAlpha = this.alpha * 0.9;
    ctx.fillStyle = this.color;
    // glow
    ctx.shadowBlur = 18 + this.size*2;
    ctx.shadowColor = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, Math.max(0.8, this.size), 0, Math.PI*2);
    ctx.fill();
    ctx.restore();
  }
}

/* color palette for sparkles */
const palette = [
  'rgba(255,255,255,1)',
  'rgba(255,200,90,1)',
  'rgba(255,120,200,1)',
  'rgba(120,220,200,1)',
  'rgba(170,120,255,1)',
  'rgba(255,130,90,1)'
];

let particles = [];
let spawnTimer = 0;
const spawnRate = 3; // baseline particles per frame (tunable)

const flyWrap = document.getElementById('flyWrap');
const doveVideo = document.getElementById('doveVideo');
const streak = document.getElementById('streak');

let paused = false;

/* mouse / touch interactions: pause on hover/tap */
flyWrap.addEventListener('mouseenter', ()=> paused = true);
flyWrap.addEventListener('mouseleave', ()=> paused = false);
flyWrap.addEventListener('pointerdown', ()=> paused = true);
window.addEventListener('pointerup', ()=> paused = false);

/* get dove center coordinate (in canvas space) */
function getDoveCenter() {
  const rect = flyWrap.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  return { x: cx, y: cy, rect };
}

/* animate */
function tick(){
  if (!paused) {
    // spawn particles near dove
    const d = getDoveCenter();
    // spawn more while crossing center
    const centerBias = Math.max(0, 1 - Math.abs((d.x / window.innerWidth) - 0.5) * 3);
    const num = Math.floor(spawnRate * (1 + centerBias*2));
    for (let i=0;i<num;i++){
      const c = palette[Math.floor(Math.random()*palette.length)];
      particles.push(new Particle(d.x + (Math.random()-0.5)*40, d.y + (Math.random()-0.5)*18, c));
    }

    // occasionally spawn bright flares
    if (Math.random() < 0.02) {
      particles.push(new Particle(d.x, d.y, 'rgba(255,255,255,1)'));
    }
  }

  // update and draw
  ctx.clearRect(0,0,canvas.width, canvas.height);
  // additive blending for glow
  ctx.globalCompositeOperation = 'lighter';

  // update particles
  for (let i = particles.length - 1; i >= 0; i--) {
    const p = particles[i];
    const alive = p.update();
    p.draw(ctx);
    if (!alive) particles.splice(i,1);
  }

  // subtle background slow colored blobs (optional): draw faint quick glows near dove
  ctx.globalCompositeOperation = 'source-over';

  // update streak position / transform to follow dove center
  const dcenter = getDoveCenter();
  const leftPct = (dcenter.x / window.innerWidth) * 100;
  streak.style.left = leftPct + '%';
  streak.style.top = (dcenter.y + dcenter.rect.height*0.15) + 'px';
  streak.style.width = Math.max(220, dcenter.rect.width*1.05) + 'px';
  streak.style.opacity = 0.7 + Math.sin(Date.now()/900)/10;

  requestAnimationFrame(tick);
}
requestAnimationFrame(tick);

/* make sure autoplay resumes on interaction if blocked */
function ensurePlay() {
  const p = doveVideo.play();
  if (p && p.catch) {
    p.catch(()=>{/* blocked; will resume on first user gesture */});
  }
}
window.addEventListener('pointerdown', ensurePlay);
window.addEventListener('keydown', ensurePlay);

/* Minor extra: randomize palette shift over time */
setInterval(()=>{
  // rotate palette periodically for color variety
  palette.push(palette.shift());
}, 3700);

</script>
</body>
</html>
